#!/usr/bin/python

import time
from src.core import TweetDragger

SLEEP_DURATION = 10 * 60

if __name__ == '__main__':
	import argparse

	parser = argparse.ArgumentParser(description='Twitter account scraper and tweet displayer')
	parser.add_argument('account', type=str, help='twitter handle to scrape')
	args = parser.parse_args()

	username = args.account

	dragger = TweetDragger(username)
	dragger.populate()

	dragger.printRecentTweets(5) # print 5 most recent tweets
	print()

	while True:
		print('\tChecking for new tweets in 10 minutes\n')

		# store the most recent tweet so we know where to pick up from
		latestTweet = list(dragger.tweets)[-1]

		time.sleep(int(SLEEP_DURATION))

		dragger.update()

		dragger.printNewTweetsSince(latestTweet)