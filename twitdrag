#!/usr/bin/python

from src import core


if __name__ == '__main__':
	import argparse

	parser = argparse.ArgumentParser(description='Twitter account scraper and tweet displayer')
	parser.add_argument('account', type=str, help='twitter handle to scrape')
	args = parser.parse_args()

	username = args.account

	jayson = core.getJsonDataFromUser(username)
	tweets = core.getTweetsFromHtml(jayson['items_html'])

	min_tweet = list(tweets)[0]
	max_tweet = list(tweets)[-1]

	for i in range(3):
		min_tweet = list(tweets)[0]
		max_tweet = list(tweets)[-1]

		if 'min_position' in jayson:
			max_position = jayson['min_position']
		else:
			max_position = "TWEET-%s-%s" % (max_tweet, min_tweet)

		jayson = core.getJsonDataFromUser(username, max_position)

		tweets = core.getTweetsFromHtml(jayson['items_html'])

		for tweet in tweets:
			print (tweets[tweet]['text'])
			print ("             ~~~~~~~~~~~~~~~")